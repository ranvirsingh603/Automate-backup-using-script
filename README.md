# Automate-backup-using-script


 ## :arrow_right: Step 1
```
First of all you have to enter your linux terminal in my case it is ubuntu.
You can enter in terminal by pressing ctrl + alt + T simultaniously.
```

 ## :arrow_right: Step 2
 ### Folder creation
 #### Here you need to create folders.
```
sudo mkdir /var/backup
sudo mkdir /var/backup/db
```

 ## :arrow_right: Step 3
 ### File creation
 #### Now, create a file with executable permission with the name “script.sh” in the folder created earlier.
```
sudo touch script.sh
```
#### Enter following command to give executible permission to script.sh file:-
```
sudo chmod 755 script.sh
```

 ## :arrow_right: Step 4
 ### Edit the file “script.sh”
 #### Open the file with following command:-
```
sudo nano script.sh 
```
#### Copy and paste the following code:-
```
              script.sh                                              
# (1) set up all the mysqldump variables
DATE=`date +"%d_%b_%Y_%H%M"`
SQLFILE=/var/backup/db/db_backup_${DATE}.sql
DATABASE=moodle
USER=moodledude
PASSWORD=12345
 # (2) in case you run this more than once a day,
# remove the previous version of the file
unalias rm     2> /dev/null
rm ${SQLFILE}     2> /dev/null
rm ${SQLFILE}.gz  2> /dev/null
 # (3) do the mysql database backup (dump)
sudo su
mysqldump -u moodledude -p12345 moodle mdlgrades>backup_gradebook.sql

```

 ## :arrow_right: Step 5
 ### Test to Verify if the Script is Working Correctly.
 #### Traverse to the script’s folder:
```
	cd /var/backup/
```
#### execute the following command:
```
sudo ./script.sh

```

 ## :arrow_right: Step 6
 ### Scheduling Execution with Cron
 #### Edit the server’s cron with the undermentioned command:
```
sudo crontab -e
```
#### Enter the following line at the bottom of this file:
```
0 1 * * * /var/backup/script.sh
```


 ## :arrow_right: Step 7
 ### Remove Old Backups
 #### Open the backup file generated by script:
```
sudo nano backup_gradebook.sql
```
#### Copy and paste the following line at the end of file:-
```
	
sudo find /var/backup/db/. -mtime +7 -exec rm {} \;
```

 ## :arrow_right: Step 8
```
Congratulations!
```
